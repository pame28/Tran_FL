using Microsoft.AspNetCore.Mvc;
using transacciones_flotantes.DTOs.TransaccionesFlotantes;
using transacciones_flotantes.Services.Interfaces;

namespace transacciones_flotantes.Controllers
{
    [ApiController]
    [Route("api/transacciones-flotantes")]
    public class TransaccionesFlotantesController : ControllerBase
    {
        private readonly ITransaccionesFlotantesService _service;

        public TransaccionesFlotantesController(ITransaccionesFlotantesService service)
        {
            _service = service;
        }

        [HttpPost]
        public async Task<IActionResult> Procesar([FromBody] TransaccionesFlotantesRequestDto request)
        {
            var resultado = await _service.ProcesarAsync(request);
            return Ok(resultado);
        }
    }
}







builder.Services.AddScoped<ITransaccionFlotanteRepository, TransaccionFlotanteRepository>();
builder.Services.AddScoped<ITransaccionesFlotantesService, TransaccionesFlotantesService>();
builder.Services.AddScoped<IProveedorTokenService, ProveedorTokenService>();
builder.Services.AddScoped<IProveedorApiClient, ProveedorApiClient>();

builder.Services.AddHttpClient(); // <- esto es crucial para HttpClient


