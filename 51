Asi dejeé mi program,cs
using Serilog;
using System.Net.Http.Headers;
using transacciones_flotantes.Infrastructure.Data;
using transacciones_flotantes.Repository;
using transacciones_flotantes.Repository.Interface;
using transacciones_flotantes.Service;
using transacciones_flotantes.Service.Interface;
using transacciones_flotantes.Utils;

var builder = WebApplication.CreateBuilder(args);

//Registro api
var baseAddressToken = builder.Configuration["ApiSettings:BaseAddressAccessToken"];

builder.Services.AddHttpClient<IProveedorTokenService, ProveedorTokenService>(client =>
{
    client.BaseAddress = new Uri(baseAddressToken);
    client.DefaultRequestHeaders.Accept.Add(
        new MediaTypeWithQualityHeaderValue("application/json"));
}).ConfigurePrimaryHttpMessageHandler(() =>
{
    var allowInvalidCerts = bool.Parse(builder.Configuration["ApiSettings:AllowInvalidCerts"]);

    return new HttpClientHandler
    {
        ServerCertificateCustomValidationCallback = allowInvalidCerts
        ? (message, cert, chain, errors) => true
        : null
    };
});

//Registro de api Payment con AuthHandler para envio de token
var baseAddressPayment = builder.Configuration["ApiSettings:BaseAddressDivideloTodo"];
builder.Services.AddTransient<AuthHandler>();
builder.Services.AddHttpClient<IProveedorApiClient, ProveedorApiClient>(client =>
{
    client.BaseAddress = new Uri(baseAddressPayment);
    client.DefaultRequestHeaders.Accept.Add(
        new MediaTypeWithQualityHeaderValue("application/json"));
}).ConfigurePrimaryHttpMessageHandler(() =>
{
    var allowInvalidCerts = bool.Parse(builder.Configuration["ApiSettings:AllowInvalidCerts"]);

    return new HttpClientHandler
    {
        ServerCertificateCustomValidationCallback = allowInvalidCerts
        ? (message, cert, chain, errors) => true
        : null
    };
}).AddHttpMessageHandler<AuthHandler>();

//Caché
builder.Services.AddMemoryCache();

// Dependency Injection

builder.Services.AddScoped<ICatalogoErroresRepository, CatalogoErroresRepository>();
builder.Services.AddScoped<IParametrosRepository, ParametrosRepositoryImp>();
builder.Services.AddScoped<IValidationService, ValidationServiceImp>();
builder.Services.AddScoped<ICurrencyRepository, CurrencyRepository>();
builder.Services.AddScoped<DBHelper>();

builder.Services.AddScoped<ITransaccionFlotanteRepository,
    TransaccionFlotanteRepository>();

builder.Services.AddScoped<ITransaccionesFlotantesService,
    TransaccionesFlotantesService>();

//builder.Services.AddHttpClient<IProveedorTokenService,
//    ProveedorTokenService>();

//builder.Services.AddHttpClient<IProveedorApiClient,
//    ProveedorApiClient>();

builder.Services.AddScoped<ICurrencyService, CurrencyService>();

builder.Services.AddHttpClient();


// Configuración de Serilog
Log.Logger = new LoggerConfiguration()
    .Enrich.FromLogContext()
    .Enrich.WithThreadId() // agrega hilo de ejecución
    .WriteTo.Console(
        outputTemplate: "{Timestamp:dd-MM-yyyy HH:mm:ss.fff} [{ThreadId}] [{Level,-5}] {SourceContext} - {Message:lj}{NewLine}{Exception}"
    )
    .WriteTo.File(
        "logs/log-.txt",
        rollingInterval: RollingInterval.Day,
        outputTemplate: "{Timestamp:dd-MM-yyyy HH:mm:ss.fff} [{ThreadId}] [{Level,-5}] {SourceContext} - {Message:lj}{NewLine}{Exception}"
    )
    .CreateLogger();


builder.Host.UseSerilog();



builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();

app.UseAuthorization();

app.MapControllers();

app.Run();




-------------------

using System.Net.Http.Headers;
using System.Text;
using System.Text.Json;
using transacciones_flotantes.DTOs.TransaccionesFlotantes;
using transacciones_flotantes.Service.Interface;

namespace transacciones_flotantes.Service
{
    public class ProveedorApiClient : IProveedorApiClient
    {
        private readonly HttpClient _httpClient;
        private readonly IProveedorTokenService _tokenService;
        private readonly IConfiguration _configuration;
        private readonly ILogger<ProveedorApiClient> _logger;

        public ProveedorApiClient(
            HttpClient httpClient,
            IProveedorTokenService tokenService,
            IConfiguration configuration,
            ILogger<ProveedorApiClient> logger)
        {
            _httpClient = httpClient;
            _tokenService = tokenService;
            _configuration = configuration;
            _logger = logger;
        }

        public async Task<string> EnviarTransaccionAsync(
            ProveedorTransaccionFlotanteRequestDto request)
        {
            var token = await _tokenService.ObtenerAccessTokenAsync();


            var baseAddress = _configuration["ApiSettings:BaseAddressTransaccionesFlotantes"];
            var endpoint = _configuration["ApiSettings:EndpointTransacciones"];

            var url = new Uri(new Uri(baseAddress), endpoint);

            var httpRequest = new HttpRequestMessage(
                HttpMethod.Post,
                url);


            httpRequest.Headers.Authorization =
                new AuthenticationHeaderValue("Bearer", token);

            httpRequest.Content = new StringContent(
                JsonSerializer.Serialize(request),
                Encoding.UTF8,
                "application/json");

            var response = await _httpClient.SendAsync(httpRequest);

            var body = await response.Content.ReadAsStringAsync();

            _logger.LogInformation(
                "Proveedor HTTP {StatusCode}",
                response.StatusCode);

            if (!response.IsSuccessStatusCode)
            {
                _logger.LogError(
                    "Proveedor error HTTP {StatusCode} - Body: {Body}",
                    response.StatusCode,
                    body);

                throw new HttpRequestException(
                    $"Proveedor respondió {response.StatusCode}");
            }

            return body;
        }
    }
}



Ayudame a realizar las modificaciones pertinentes en el ProveedorApiClient








